# ุณุณุชู ูพุฑุฏุงุฎุช ุงูู ฺฉู ูพูู

## ูฺฺฏโูุง ุงุตู

- **ุงุญุฑุงุฒ ููุช ุงูู ฺฉุงุฑุจุฑุงู:** ุจุง ุงุณุชูุงุฏู ุงุฒ Laravel Passport ุจุฑุง ุงุญุฑุงุฒ ููุช API (OAuth 2.0).

- **ูุฏุฑุช ฺฉู ูพูู:** ฺฉุงุฑุจุฑุงู ุฏุงุฑุง ฺฉู ูพูู ุจุง ููุฌูุฏ ูุดุฎุต ูุณุชูุฏ.

- ููุฏู ฺฉุฑุฏู Global Daily Limit Amount ุจุง Redis hybrid

- **ูุฑุขูุฏ ฺฉุงูู ูพุฑุฏุงุฎุช ูุงฺฉุชูุฑ:** ฺฉ ูุฑุขูุฏ ูพุฑุฏุงุฎุช ุฏู ูุฑุญููโุง ุดุงูู:
    1.  **ุฏุฑุฎูุงุณุช ูพุฑุฏุงุฎุช:** ูพุดโูุงุฒูุง ุฑุง ุงุนุชุจุงุฑุณูุฌ ฺฉุฑุฏู ู ฺฉ ุฑูุฒ ฺฉุจุงุฑ ูุตุฑู (OTP) ุฒูุงูโุฏุงุฑ ุงุฑุณุงู ูโฺฉูุฏ.
    2.  **ุชุงุฏ ูพุฑุฏุงุฎุช:** ุฑูุฒ ฺฉุจุงุฑ ูุตุฑู ุฑุง ุชุงุฏ ฺฉุฑุฏู ู ุชุฑุงฺฉูุด ุฑุง ุจู ุตูุฑุช ุงุชูฺฉ (Atomic) ูพุฑุฏุงุฒุด ูโฺฉูุฏ.
- 
- **ุงุนุชุจุงุฑุณูุฌ ูู:** ูพุงุฏูโุณุงุฒ ุงูฺฏู Pipeline ุจู ููุฑุงู Specification Pattern ุจุฑุง ุงุนุชุจุงุฑุณูุฌ ููุงูู ฺฉุณุจโูฺฉุงุฑ ุจู ุดฺฉู ุชูุฒ ู ูุงุจู ุชูุณุนู.
- 
- **ฺฉูุชุฑู ููุฒูุงู (Concurrency):** ุงุณุชูุงุฏู ุงุฒ ููู ุจุฏุจูุงูู (Pessimistic Locking) ุจุง `SELECT ... FOR UPDATE` ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูููุน Race Condition ุฏุฑ ุญู ูพุฑุฏุงุฒุด ูพุฑุฏุงุฎุช.
- 
- **ูุญุฏูุฏุณุงุฒ ุฏุฑุฎูุงุณุชโูุง (Throttling):** ุฌููฺฏุฑ ุงุฒ ุงุณูพู ุฏุฑุฎูุงุณุช OTP ุจุง ุงุณุชูุงุฏู ุงุฒ Rate Limiter ูุงุฑุงูู.
- 
- **ูุญุฏูุฏุช ุฎุฑุฌ ุฑูุฒุงูู:** ุงุนูุงู ฺฉ ูุญุฏูุฏุช ุฎุฑุฌ ุฑูุฒุงูู ุฏุฑ ุณุทุญ ฺฉู ุณุณุชู.
- 
- **ุณุณุชู ุจุงุฒฺฏุดุช ูุฌู (Refund)
- 
- **ุงุทูุงุนโุฑุณุงู ุฑูุฏุงุฏ-ูุญูุฑ:** ุงุณุชูุงุฏู ุงุฒ ุณุณุชู Event ู Listener ูุงุฑุงูู ุจุฑุง ุฌุฏุงุณุงุฒ ููุทู ุงุทูุงุนโุฑุณุงู ุงุฒ ููุทู ุงุตู ุจุฑูุงูู.
- 
- **ุชุณุชโููุณ ุฌุงูุน:** ุดุงูู ูุฌููุนูโุง ุงุฒ ุชุณุชโูุง Feature ุจุฑุง ุงุทููุงู ุงุฒ ูพุงุฏุงุฑ ู ุตุญุช ุนููฺฉุฑุฏ ูุฑุขูุฏ ูพุฑุฏุงุฎุช.

## ูพุดุชู ููุงูุฑ ู ุงูฺฏููุง ุทุฑุงุญ

- **ูุฑููุฑฺฉ:** Laravel 12
- 
- **ุงุญุฑุงุฒ ููุช:** Laravel Passport (OAuth 2.0)
- 
- **ุฏุชุงุจุณ:** MySQL (ู SQLite ุจุฑุง ูุญุท ุชุณุช)
- 
- **ฺฉุดูฺฏ:** Redis (ุจุฑุง ูููโูุง ุงุชูฺฉ ู Rate Limiting)
- 
- **ุงูฺฏููุง ุทุฑุงุญ ฺฉูุฏ:**
    - Repository Pattern
    - Service Layer
    - Pipeline Pattern (ุจุฑุง ุงุนุชุจุงุฑุณูุฌ)
    - Specification Pattern (ุจุฑุง ููุงูู ฺฉุณุจโูฺฉุงุฑ)
    - Observer Pattern (Events & Listeners)
    - Data Transfer Objects (DTOs)

---

## ๐ ุฑุงูโุงูุฏุงุฒ ูพุฑูฺู

ุจุฑุง ุฑุงูโุงูุฏุงุฒ ูพุฑูฺู ุฑู ุณุณุชู ะปะพะบะฐะป ุฎูุฏ ุฌูุช ุชูุณุนู ู ุชุณุชุ ูุฑุงุญู ุฒุฑ ุฑุง ุฏูุจุงู ฺฉูุฏ.

### ูพุดโูุงุฒูุง

- Docker
- Docker Compose

### ฑ. ฺฉููู ฺฉุฑุฏู ูพุฑูฺู

```
git clone [YOUR_PROJECT_GIT_URL]
cd [PROJECT_DIRECTORY]
```

### ฒ. ุชูุธูุงุช ูุญุท

ุงุจุชุฏุง ูุงู ูููููโ ูุญุท ุฑุง ฺฉูพ ฺฉูุฏ.

```
cp .env.example .env
```

ูุงู `.env` ุจุฑุง ฺฉุงุฑ ุจุง Docker ุงุฒ ูพุด ุชูุธู ุดุฏู ุงุณุช ู ูุงุฒ ุจู ุชุบุฑ ุงุทูุงุนุงุช ุฏุชุงุจุณ ูุฏุงุฑุฏ.

### ณ. ุณุงุฎุช ู ุงุฌุฑุง ฺฉุงูุชูุฑูุง Docker

ูโุชูุงูุฏ ูุณุชููุงู ุงุฒ Docker Compose ุง ุงุฒ ุฏุณุชูุฑ ูุงูุจุฑ ููุฌูุฏ ุฏุฑ Makefile ุงุณุชูุงุฏู ฺฉูุฏ.

```
# ุจุง ุงุณุชูุงุฏู ุงุฒ Docker Compose
docker-compose up -d --build

# ุง ุจุง ุงุณุชูุงุฏู ุงุฒ Makefile
make app_build
```

ุงู ุฏุณุชูุฑ ุงูุฌโูุง ููุฑุฏ ูุงุฒ ุฑุง ุณุงุฎุชู ู ุณุฑูุณโูุง `app` (ุงูพูฺฉุดู)ุ `db` (MySQL) ู `redis` ุฑุง ุงุฌุฑุง ูโฺฉูุฏ.

### ด. ูุตุจ ูุงุจุณุชฺฏโูุง

ูุงุฑุฏ ุดู ฺฉุงูุชูุฑ ุงูพูฺฉุดู ุดูุฏ.

```
docker exec -it technopay-app sh
```

ูพุณ ุงุฒ ูุฑูุฏ ุจู ฺฉุงูุชูุฑุ ุฏุณุชูุฑุงุช ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:


### ต. ุชูุธูุงุช ุฏุชุงุจุณ ู Passport

ุงู ุฏุณุชูุฑ ฺฉูุฏูุง ุฑูุฒูฺฏุงุฑ ู ฺฉ "Password Grant Client" ุงุฌุงุฏ ูโฺฉูุฏ. Client ID ู Secret ุฏุฑ ฺฉูุณูู ููุงุด ุฏุงุฏู ูโุดููุฏ.
```
php artisan passport:client --password
```
**ููู:** ูุงู `.env` ุฎูุฏ ุฑุง ุจุงุฒ ฺฉุฑุฏู ู ูุชุบุฑูุง ุฒุฑ ุฑุง ุจุง ุงุทูุงุนุงุช ฺฉู ุฏุฑุงูุช ฺฉุฑุฏุฏุ ุจูโุฑูุฒุฑุณุงู ฺฉูุฏ:

```
CLIENT_ID=...
CLIENT_SECRET=...
```


## โ ุงุฌุฑุง ุชุณุชโูุง

ุจุฑุง ุงุฌุฑุง ุชูุงู ุชุณุชโูุง Feature ู Unitุ ุฏุณุชูุฑ ุฒุฑ ุฑุง ุฏุฑ ุฏุงุฎู ฺฉุงูุชูุฑ ุงูพูฺฉุดู ุงุฌุฑุง ฺฉูุฏ:

```
php artisan test
```

## ๐ฏ ูุณุช API Endpoints

### ุงุญุฑุงุฒ ููุช
- `POST /api/v1/auth/register`
- `POST /api/v1/auth/login`
- `GET /api/v1/auth/user` (ูุงุฒููุฏ Bearer Token)
- `GET /api/v1/auth/logout` (ูุงุฒููุฏ Bearer Token)

### ูุฑุขูุฏ ูพุฑุฏุงุฎุช
- `POST /api/v1/invoice/{invoice}/request-payment` (ูุงุฒููุฏ Bearer Token)
- `POST /api/v1/invoice/pay` (ูุงุฒููุฏ Bearer Token)
